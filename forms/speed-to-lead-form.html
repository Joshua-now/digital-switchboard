<!-- Speed to Lead - Anna Form -->
<style>
.ai-callback-form {
  max-width: 500px;
  margin: 0 auto;
  padding: 30px;
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}
.ai-form-group {
  margin-bottom: 20px;
}
.ai-form-label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
  color: #2d3748;
  font-size: 14px;
}
.ai-form-input {
  width: 100%;
  padding: 12px 16px;
  border: 2px solid #e2e8f0;
  border-radius: 8px;
  font-size: 15px;
  transition: border-color 0.2s;
  box-sizing: border-box;
}
.ai-form-input:focus {
  outline: none;
  border-color: #3182ce;
}
.ai-submit-btn {
  width: 100%;
  padding: 14px;
  background: #3182ce;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}
.ai-submit-btn:hover {
  background: #2c5aa0;
}
.ai-submit-btn:disabled {
  background: #cbd5e0;
  cursor: not-allowed;
}
.ai-message {
  margin-top: 20px;
  padding: 12px 16px;
  border-radius: 8px;
  font-size: 14px;
  display: none;
}
.ai-message.success {
  background: #c6f6d5;
  color: #22543d;
  border: 1px solid #9ae6b4;
}
.ai-message.error {
  background: #fed7d7;
  color: #742a2a;
  border: 1px solid #fc8181;
}
.ai-message.show {
  display: block;
}
</style>

<form id="ai-callback-form-stl" class="ai-callback-form">
  <div class="ai-form-group">
    <label class="ai-form-label" for="ai-firstName-stl">First Name *</label>
    <input type="text" id="ai-firstName-stl" name="firstName" class="ai-form-input" required>
  </div>

  <div class="ai-form-group">
    <label class="ai-form-label" for="ai-lastName-stl">Last Name *</label>
    <input type="text" id="ai-lastName-stl" name="lastName" class="ai-form-input" required>
  </div>

  <div class="ai-form-group">
    <label class="ai-form-label" for="ai-phone-stl">Phone Number *</label>
    <input type="tel" id="ai-phone-stl" name="phone" class="ai-form-input" placeholder="+1 321 555 1234" required>
  </div>

  <div class="ai-form-group">
    <label class="ai-form-label" for="ai-email-stl">Email</label>
    <input type="email" id="ai-email-stl" name="email" class="ai-form-input">
  </div>

  <div class="ai-form-group">
    <label class="ai-form-label" for="ai-company-stl">Company Name</label>
    <input type="text" id="ai-company-stl" name="company" class="ai-form-input">
  </div>

  <button type="submit" class="ai-submit-btn">Call Me Now üìû</button>
  
  <div id="ai-message-stl" class="ai-message"></div>
</form>

<script>
(function() {
  const form = document.getElementById('ai-callback-form-stl');
  const messageEl = document.getElementById('ai-message-stl');
  const submitBtn = form.querySelector('.ai-submit-btn');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    submitBtn.disabled = true;
    submitBtn.textContent = 'Submitting...';
    messageEl.classList.remove('show', 'success', 'error');

    const formData = new FormData(form);
    const data = {
      firstName: formData.get('firstName'),
      lastName: formData.get('lastName'),
      phone: formData.get('phone'),
      email: formData.get('email'),
      company: formData.get('company'),
      product: 'speed-to-lead',
      source: 'aiteammate.io'
    };

    try {
      const response = await fetch('https://digital-switchboard-production.up.railway.app/api/leads/create', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      const result = await response.json();

      if (result.success) {
        messageEl.textContent = `‚úÖ Success! ${result.agent} will call you at ${data.phone} within 60 seconds.`;
        messageEl.classList.add('success', 'show');
        form.reset();
      } else if (result.duplicate) {
        messageEl.textContent = `‚ö†Ô∏è You've already requested a callback. Check your phone!`;
        messageEl.classList.add('error', 'show');
      } else {
        messageEl.textContent = `‚ùå ${result.error || 'Something went wrong. Please try again.'}`;
        messageEl.classList.add('error', 'show');
      }
    } catch (error) {
      console.error('Form error:', error);
      messageEl.textContent = `‚ùå Failed to submit. Please try again or call us directly.`;
      messageEl.classList.add('error', 'show');
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = 'Call Me Now üìû';
    }
  });
})();
</script>
